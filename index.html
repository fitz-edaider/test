<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI in Schools: Roleplaying Ethical Challenges</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 0;
    }
    #game-container {
      max-width: 800px;
      margin: 40px auto;
      background: #fff;
      padding: 20px 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border-radius: 8px;
    }
    h1, h2 {
      text-align: center;
      color: #333;
    }
    #message {
      margin: 20px 0;
      line-height: 1.6;
    }
    #choices {
      margin: 20px 0;
    }
    .choice-button, .lang-button, #nextButton, #restartButton, #startButton, .more-info-btn {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      font-size: 1rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .choice-button, #startButton {
      background-color: #007BFF;
      color: white;
    }
    .choice-button:hover, #startButton:hover {
      background-color: #0056b3;
    }
    .lang-button {
      background-color: #6c757d;
      color: white;
    }
    .lang-button:hover {
      background-color: #5a6268;
    }
    #nextButton, #restartButton {
      background-color: #28a745;
      color: white;
    }
    #nextButton:hover, #restartButton:hover {
      background-color: #1e7e34;
    }
    /* Make the More Info button smaller */
    .more-info-btn {
      background-color: #ffc107;
      color: #333;
      font-size: 0.8rem;
      padding: 5px 8px;
      width: auto;
      display: inline-block;
      margin-top: 10px;
    }
    .more-info-btn:hover {
      background-color: #e0a800;
    }
    .outcome {
      background-color: #e9ecef;
      padding: 10px;
      border-radius: 4px;
      margin-top: 10px;
      border-left: 4px solid #007BFF;
    }
    /* Modal Styles */
    #modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
    }
    #modal-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 600px;
      border-radius: 8px;
    }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <h1>AI in Schools: Roleplaying Ethical Challenges</h1>
    
    <!-- Language Selection -->
    <div id="languageSelection">
      <p>Please choose your language / Vänligen välj ditt språk:</p>
      <button class="lang-button" onclick="setLanguage('en')">English</button>
      <button class="lang-button" onclick="setLanguage('sv')">Svenska</button>
    </div>
    
    <!-- Game Content -->
    <div id="message"></div>
    <div id="choices"></div>
    <button id="startButton" style="display:none;" onclick="startGame()"></button>
    <button id="nextButton" style="display:none;">Next</button>
    <button id="restartButton" style="display:none;" onclick="startGame()"></button>
  </div>

  <!-- Modal Popup -->
  <div id="modal">
    <div id="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <div id="modal-body"></div>
    </div>
  </div>

  <script>
    // Global variables
    let currentLanguage = "en"; // "en" or "sv"
    let scenarioIndex = -1;
    let finalPageIndex = -1;
    let inFinalPages = false;

    // Shuffle function to randomize an array
    function shuffleArray(array) {
      let newArray = array.slice();
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }

    // Data: Updated scenarios array with 6 scenarios.
    const scenarios = [
      {
        en: {
          title: "The Inaccurate Explanation",
          description: "A student named Liam uses StudyMate to help with his science homework. When he asks, “What do plants do with the oxygen they produce?”, the chatbot confidently replies, “Plants use oxygen to make food.” The next day in class, Liam is embarrassed when his answer is marked incorrect.",
          question: "How do you address this situation as a teacher?",
          choices: [
            { 
              text: "Acknowledge the error and review the concept with the class", 
              outcome: "By addressing the mistake openly, you help rebuild trust in both technology and your teaching, reinforcing the importance of verifying information.",
              correct: true 
            },
            { 
              text: "Discourage the use of chatbots in class", 
              outcome: "While caution is important, completely discouraging technology might deprive students of valuable support. A balanced approach is preferable.",
              correct: false 
            },
            { 
              text: "Ignore the error and move on", 
              outcome: "Ignoring the issue can leave students confused and misses the opportunity to discuss how to critically assess AI-generated answers.",
              correct: false 
            }
          ]
        },
        sv: {
          title: "Den felaktiga förklaringen",
          description: "En elev vid namn Liam använder StudyMate för att hjälpa sig med sin naturkunskapsläxa. När han frågar, 'Vad gör växter med det syre de producerar?' svarar chatboten självsäkert, 'Växter använder syre för att göra mat.' Nästa dag i klassen blir Liam generad när hans svar visar sig vara fel.",
          question: "Hur hanterar du denna situation som lärare?",
          choices: [
            { 
              text: "Bekräfta felet och gå igenom begreppet med klassen", 
              outcome: "Genom att öppet hantera misstaget hjälper du till att återuppbygga förtroendet för både teknologin och din undervisning, samt förstärker vikten av att verifiera information.",
              correct: true 
            },
            { 
              text: "Avråda från att använda chatbots i klassrummet", 
              outcome: "Att helt avråda från teknologin kan beröva eleverna värdefullt stöd. En balanserad strategi är oftast bättre.",
              correct: false 
            },
            { 
              text: "Ignorera felet och gå vidare", 
              outcome: "Att ignorera problemet kan lämna eleverna förvirrade och missa en chans att diskutera vikten av att granska AI-genererade svar kritiskt.",
              correct: false 
            }
          ]
        }
      },
      {
        en: {
          title: "The Unequal Helper",
          description: "Sofia receives a clear, step-by-step explanation for a math problem from StudyMate. However, her classmate Noor, who benefits from simpler language, is overwhelmed by a jargon-filled response.",
          question: "How do you address the inequity in support?",
          choices: [
            { 
              text: "Offer additional, simplified explanations for Noor and adjust the tool’s settings if possible", 
              outcome: "Customizing support to meet diverse needs reinforces inclusivity and ensures every student benefits from the technology.",
              correct: true 
            },
            { 
              text: "Tell Noor to work harder to understand the advanced explanation", 
              outcome: "This approach may deepen feelings of exclusion rather than addressing the underlying accessibility issue.",
              correct: false 
            },
            { 
              text: "Ignore the discrepancy", 
              outcome: "Overlooking the issue risks perpetuating inequity and can undermine students’ confidence in using new technology.",
              correct: false 
            }
          ]
        },
        sv: {
          title: "Den ojämlika hjälpen",
          description: "Sofia får en tydlig, steg-för-steg förklaring på ett matematikproblem från StudyMate. Men hennes klasskamrat Noor, som behöver enklare språk, överväldigas av ett svar fullt av fackspråk.",
          question: "Hur hanterar du ojämlikheten i stödet?",
          choices: [
            { 
              text: "Erbjuda ytterligare, förenklade förklaringar till Noor och justera verktygets inställningar om möjligt", 
              outcome: "Att anpassa stödet efter olika behov stärker inkluderingen och säkerställer att alla elever får ut det mesta av teknologin.",
              correct: true 
            },
            { 
              text: "Säg åt Noor att arbeta hårdare för att förstå den avancerade förklaringen", 
              outcome: "Detta tillvägagångssätt kan förstärka känslan av utanförskap istället för att lösa det underliggande problemet.",
              correct: false 
            },
            { 
              text: "Ignorera skillnaden", 
              outcome: "Att förbise problemet riskerar att upprätthålla ojämlikhet och kan minska elevernas förtroende för ny teknik.",
              correct: false 
            }
          ]
        }
      },
      {
        en: {
          title: "The Dependency Trap",
          description: "Emma, a diligent student, starts relying heavily on StudyMate for every assignment. Over time, she stops engaging critically with her work, and her creative and analytical skills begin to decline.",
          question: "What is your response to help Emma regain her independence?",
          choices: [
            { 
              text: "Encourage her to solve problems independently and provide alternative learning resources", 
              outcome: "Promoting critical thinking and offering varied resources supports her development and ensures she remains actively engaged in learning.",
              correct: true 
            },
            { 
              text: "Allow her to continue using StudyMate without intervention", 
              outcome: "Without guidance, Emma risks becoming overly dependent on technology, which may hamper her long-term intellectual growth.",
              correct: false 
            },
            { 
              text: "Punish her for relying on the chatbot", 
              outcome: "Punishment does little to address the dependency issue and may damage her motivation to learn independently.",
              correct: false 
            }
          ]
        },
        sv: {
          title: "Beroendefällan",
          description: "Emma, en flitig elev, börjar lita tungt på StudyMate för varje uppgift. Med tiden slutar hon tänka kritiskt på sitt arbete, och hennes kreativa och analytiska förmågor börjar minska.",
          question: "Vad är ditt svar för att hjälpa Emma återfå sin självständighet?",
          choices: [
            { 
              text: "Uppmuntra henne att lösa problem självständigt och erbjuda alternativa lärresurser", 
              outcome: "Att främja kritiskt tänkande och erbjuda varierade resurser stödjer hennes utveckling och säkerställer att hon förblir aktivt engagerad i lärandet.",
              correct: true 
            },
            { 
              text: "Låt henne fortsätta använda StudyMate utan ingripande", 
              outcome: "Utan vägledning riskerar Emma att bli alltför beroende av teknologin, vilket kan hämma hennes långsiktiga utveckling.",
              correct: false 
            },
            { 
              text: "Straffa henne för att lita på chatboten", 
              outcome: "Straff bidrar inte till att lösa beroendeproblemet och kan skada hennes motivation att lära sig självständigt.",
              correct: false 
            }
          ]
        }
      },
      {
        en: {
          title: "AI in Schools: A Lifesaver or a Cause for Concern?",
          description: "A high school installs AI software on every student Chromebook to monitor online activity for signs of self-harm. In one case, the system alerts authorities, saving a student’s life. In another, it misinterprets a dark, poetic assignment as a cry for help, triggering an unwarranted police visit and traumatizing the student.",
          question: "How do you balance student privacy with safety when using such AI monitoring?",
          choices: [
            { 
              text: "Establish a human review process for all AI alerts and ensure families are informed about the protocols", 
              outcome: "Involving counselors or educators helps ensure that context is considered, protecting both privacy and well-being.",
              correct: true 
            },
            { 
              text: "Rely solely on AI alerts for swift intervention", 
              outcome: "While swift action can save lives, relying only on AI risks privacy breaches and harm through false positives.",
              correct: false 
            },
            { 
              text: "Suspend the monitoring system entirely to protect privacy", 
              outcome: "Removing the system safeguards privacy, but it also eliminates a tool for identifying at-risk students. A balance is needed.",
              correct: false 
            }
          ]
        },
        sv: {
          title: "AI i skolor: En livräddare eller en källa till oro?",
          description: "En gymnasieskola installerar AI-mjukvara på varje elevs Chromebook för att övervaka onlineaktivitet efter tecken på självskada. I ett fall larmar systemet myndigheterna och räddar en elevs liv. I ett annat fall missförstår det en mörk, poetisk uppgift som ett rop på hjälp, vilket leder till ett obefogat polisbesök och traumatisering.",
          question: "Hur balanserar du elevernas integritet med säkerheten när du använder sådan AI-övervakning?",
          choices: [
            { 
              text: "Inför en manuell granskningsprocess för alla AI-larm och informera familjerna om protokollen", 
              outcome: "Genom att involvera kuratorer eller lärare säkerställs att sammanhanget beaktas, vilket skyddar både integritet och välmående.",
              correct: true 
            },
            { 
              text: "Förlita sig enbart på AI-larm för snabba ingripanden", 
              outcome: "Snabba ingripanden kan vara livräddande, men enbart AI-riskerar intrång i integriteten och skador genom felaktiga larm.",
              correct: false 
            },
            { 
              text: "Avbryt övervakningssystemet helt för att skydda integriteten", 
              outcome: "Att ta bort systemet skyddar integriteten, men förlorar också ett verktyg för att identifiera risker. Balans är avgörande.",
              correct: false 
            }
          ]
        }
      },
      {
        en: {
          title: "When Technology Misses the Mark",
          description: "Ms. Carter, a high school English teacher, uses an AI tool to generate supplemental materials for her Holocaust literature unit. Pressed for time, she distributes the AI-generated handout without thoroughly reviewing it. The handout contains fabricated details—including a fictional 'Holocaust by drowning'—which leads to confusion among students and sparks controversy among staff and parents.",
          question: "What steps should schools take to ensure teachers are equipped to responsibly use AI?",
          choices: [
            { 
              text: "Provide professional development on AI literacy and require thorough vetting of AI-generated content", 
              outcome: "Empowering teachers with AI literacy and proper review protocols helps maintain the accuracy and integrity of sensitive materials.",
              correct: true 
            },
            { 
              text: "Rely entirely on AI for content creation to save time", 
              outcome: "Overreliance on AI without oversight risks spreading misinformation and undermines professional responsibility.",
              correct: false 
            },
            { 
              text: "Encourage collaboration among educators to review and cross-check AI-generated content", 
              outcome: "Collaborative review processes help catch errors and foster shared responsibility for educational quality, but it's not an effective use of time resources to do it every time content is generated.",
              correct: false 
            }
          ]
        },
        sv: {
          title: "När teknologin misslyckas",
          description: "Ms. Carter, en gymnasielärare i engelska, använder ett AI-verktyg för att skapa kompletterande material till en undervisningsenhet om Förintelsen. På grund av tidsbrist distribuerar hon materialet utan noggrann granskning. Materialet innehåller fabricerade detaljer – bland annat en fiktiv 'Förintelsen genom drunkning' – vilket leder till förvirring och kontrovers bland både elever och personal.",
          question: "Vilka åtgärder bör skolor vidta för att säkerställa att lärare kan använda AI på ett ansvarsfullt sätt?",
          choices: [
            { 
              text: "Erbjuda fortbildning i AI-läskunnighet och kräva noggrann granskning av AI-genererat innehåll", 
              outcome: "Genom att rusta lärare med AI-läskunnighet och etablerade granskningsrutiner säkerställs att materialet är korrekt och pålitligt.",
              correct: true 
            },
            { 
              text: "Förlita sig helt på AI för att skapa innehåll och spara tid", 
              outcome: "Att enbart lita på AI utan mänsklig översyn riskerar att sprida felaktig information och undergräva lärarnas yrkesansvar.",
              correct: false 
            },
            { 
              text: "Uppmuntra samarbete bland lärare för att granska och korskontrollera AI-genererat innehåll", 
              outcome: "Samarbetsgranskningar hjälper till att fånga upp fel och främjar ett gemensamt ansvar för utbildningskvaliteten, men det är inte en effektiv användning av tidsresurser att göra det varje gång innehåll genereras.",
              correct: false 
            }
          ]
        }
      },
      {
        en: {
          title: "Empowering Environmental Problem-Solvers",
          description: "Ms. Patel, a high school environmental science teacher, introduces an AI platform called EcoSolve to her class. The platform provides local environmental data, predictive modeling tools, and scenario simulations. For their unit on renewable energy, students analyze local energy consumption, carbon emissions, and renewable energy potential. Working in teams, they propose innovative solutions—such as installing solar panels on the school roof, designing a wind farm, or launching a community energy conservation campaign. EcoSolve offers real-time feedback on feasibility, cost, and environmental impact, bridging classroom learning with real-world applications.",
          question: "How can educators empower students to investigate the real-world implications of AI, including its environmental effects, and use that knowledge to drive sustainable innovation?",
          choices: [
            { 
              text: "Integrate project-based learning that includes partnerships with local organizations to evaluate AI’s environmental footprint and explore sustainable solutions.", 
              outcome: "This approach allows students to connect AI’s capabilities with local, community-based environmental challenges, fostering practical understanding and innovation.",
              correct: true 
            },
            { 
              text: "Use AI tools solely as data sources for classroom exercises without linking them to broader environmental contexts.", 
              outcome: "While classroom exercises are useful, they may not fully capture the real-world complexities of AI's environmental impact.",
              correct: false 
            },
            { 
              text: "Combine AI data analysis with traditional research and invite environmental experts to discuss real-world AI applications and challenges.", 
              outcome: "This blended method can provide comprehensive insights, though it might be challenging to implement consistently due to resource constraints.",
              correct: false 
            }
          ]
        },
        sv: {
          title: "Att stärka miljöinnovatörer",
          description: "Ms. Patel, en gymnasielärare i miljövetenskap, introducerar en AI-plattform kallad EcoSolve till sin klass. Plattformen tillhandahåller lokal miljödata, modelleringsverktyg och scenariosimuleringar. Under en enhet om förnybar energi analyserar eleverna lokal energiförbrukning, koldioxidutsläpp och potentialen för förnybar energi. I grupper föreslår de innovativa lösningar, till exempel att installera solpaneler på skolans tak, designa en vindkraftspark eller starta en kampanj för energibesparing i samhället. EcoSolve ger omedelbar feedback på genomförbarhet, kostnad och miljöpåverkan, och skapar en bro mellan klassrumsundervisningen och verkliga tillämpningar.",
          question: "Hur kan lärare stärka elevernas förmåga att undersöka de verkliga konsekvenserna av AI, inklusive dess miljöpåverkan, och använda den kunskapen för att driva hållbar innovation?",
          choices: [
            { 
              text: "Integrera projektbaserat lärande i samarbete med lokala organisationer, så att eleverna kan utvärdera AI:s miljöavtryck och utforska hållbara lösningar.", 
              outcome: "Detta angreppssätt ger eleverna möjlighet att koppla AI:s möjligheter till lokala miljöutmaningar och främjar praktisk förståelse och innovation.",
              correct: true 
            },
            { 
              text: "Använd enbart AI-verktyg som datakällor för klassrumsövningar utan att koppla dem till bredare miljökontexter.", 
              outcome: "Även om klassrumsövningar är värdefulla kanske de inte fångar de verkliga komplexiteterna i AI:s miljöpåverkan.",
              correct: false 
            },
            { 
              text: "Kombinera AI-dataanalys med traditionell forskning och bjud in miljöexperter att diskutera AI:s verkliga tillämpningar och utmaningar.", 
              outcome: "Denna blandade metod kan ge en bred insikt, men kan vara svår att implementera regelbundet på grund av resursbegränsningar.",
              correct: false 
            }
          ]
        }
      }
    ];

    // Final pages: Ethical Reflection and Reality Check (with translations)
    const finalPages = [
      {
        en: {
          title: "Reflecting on Ethical Principles",
          content: `
            <h2>Reflecting on Ethical Principles</h2>
            <p>As you review these scenarios, consider how UNESCO's ethical principles apply to AI in education:</p>
            <ul>
              <li><strong>Do No Harm:</strong> Ensure that technology supports learning without causing misinformation or harm.</li>
              <li><strong>Proportionality:</strong> Use AI tools in ways that are justified by their benefits without compromising privacy or accuracy.</li>
              <li><strong>Non-Discrimination:</strong> Tailor technology to meet diverse needs and prevent biases.</li>
              <li><strong>Transparency and Explainability:</strong> Clearly communicate how AI tools work and their limitations.</li>
              <li><strong>Human Determination:</strong> Maintain human oversight so that educators remain central to the learning process.</li>
              <li><strong>Sustainability:</strong> Consider the long-term impacts of AI on the environment and society.</li>
            </ul>
            <p>How will you integrate these principles into your teaching and policies?</p>
          `
        },
        sv: {
          title: "Reflektion kring etiska principer",
          content: `
            <h2>Reflektion kring etiska principer</h2>
            <p>När du granskar dessa scenarier, överväg hur UNESCOs etiska principer kan tillämpas på AI i utbildningen:</p>
            <ul>
              <li><strong>Skada inte:</strong> Se till att teknologin stödjer lärande utan att sprida felaktig information eller orsaka skada.</li>
              <li><strong>Proportionalitet:</strong> Använd AI-verktyg på sätt som motiveras av deras fördelar utan att kompromissa med integritet eller noggrannhet.</li>
              <li><strong>Icke-diskriminering:</strong> Anpassa teknologin för att möta olika behov och förhindra partiskhet.</li>
              <li><strong>Transparens och förklarbarhet:</strong> Kommunicera tydligt hur AI-verktyg fungerar och deras begränsningar.</li>
              <li><strong>Mänsklig kontroll:</strong> Säkerställ att lärare förblir centrala i beslutsprocessen.</li>
              <li><strong>Hållbarhet:</strong> Överväg de långsiktiga effekterna av AI på miljö och samhälle.</li>
            </ul>
            <p>Hur kommer du att integrera dessa principer i din undervisning och dina policies?</p>
          `
        }
      },
      {
        en: {
          title: "Reality Check",
          content: `
            <h2>Reality Check</h2>
            <p>Explore these resources to learn how AI is currently used in educational settings:</p>
            <ul>
              <li><a href="https://www.nytimes.com/2024/12/09/health/suicide-monitoring-software-schools.html#" target="_blank">New York Times: Spying on Student Devices, Schools Aim to Intercept Self-Harm Before It Happens</a></li>
              <li><a href="https://educationaltechnologyjournal.springeropen.com/articles/10.1186/s41239-023-00426-1" target="_blank">Role of AI chatbots in education: systematic literature review</a></li>
              <li><a href="https://unesdoc.unesco.org/ark:/48223/pf0000390211" target="_blank">AI and the Holocaust: rewriting history? The impact of artificial intelligence on understanding the Holocaust</a></li>
              <li><a href="https://medium.com/open-learning/new-day-of-ai-curricula-brings-climate-change-into-the-ai-conversation-with-k-12-students-788c2ae072f3" target="_blank">New Day of AI curricula brings climate change into the AI conversation with K-12 students</a></li>
            </ul>
            <p>These resources offer real-world insights into both the opportunities and ethical dilemmas of AI in education.</p>
          `
        },
        sv: {
          title: "Verklighetskontroll",
          content: `
            <h2>Verklighetskontroll</h2>
            <p>Utforska dessa resurser för att se hur AI används i utbildningsmiljöer:</p>
            <ul>
              <li><a href="https://www.nytimes.com/2024/12/09/health/suicide-monitoring-software-schools.html#" target="_blank">New York Times: Övervakning av elevens enheter, skolor försöker förhindra självskada</a></li>
              <li><a href="https://educationaltechnologyjournal.springeropen.com/articles/10.1186/s41239-023-00426-1" target="_blank">Role of AI chatbots in education: systematic literature review</a></li>
              <li><a href="https://unesdoc.unesco.org/ark:/48223/pf0000390211" target="_blank">AI and the Holocaust: rewriting history? The impact of artificial intelligence on understanding the Holocaust</a></li>
              <li><a href="https://medium.com/open-learning/new-day-of-ai-curricula-brings-climate-change-into-the-ai-conversation-with-k-12-students-788c2ae072f3" target="_blank">New Day of AI curricula brings climate change into the AI conversation with K-12 students</a></li>
            </ul>
            <p>Dessa resurser ger verkliga insikter i både möjligheterna och de etiska dilemman som AI medför i utbildningen.</p>
          `
        }
      }
    ];

    // DOM elements
    const messageDiv = document.getElementById("message");
    const choicesDiv = document.getElementById("choices");
    const startButton = document.getElementById("startButton");
    const nextButton = document.getElementById("nextButton");
    const restartButton = document.getElementById("restartButton");
    const languageSelection = document.getElementById("languageSelection");

    // Set language and update button texts
    function setLanguage(lang) {
      currentLanguage = lang;
      languageSelection.style.display = "none";
      startButton.style.display = "block";
      startButton.textContent = (lang === "en") ? "Start Game" : "Starta spelet";
      restartButton.textContent = (lang === "en") ? "Restart Game" : "Starta om spelet";
      nextButton.textContent = (lang === "en") ? "Next" : "Nästa";
    }

    // Clear display areas
    function clearDisplay() {
      messageDiv.innerHTML = "";
      choicesDiv.innerHTML = "";
    }

    // Start the game with introduction text
    function startGame() {
      scenarioIndex = -1;
      finalPageIndex = -1;
      inFinalPages = false;
      clearDisplay();
      const introText = (currentLanguage === "en") ?
        `<p>Welcome, Teacher! In this interactive roleplaying game, you will navigate scenarios that arise from integrating AI tools into education. Reflect on ethical challenges such as accuracy, equity, dependency, privacy, and sustainability as you choose your responses.</p>
         <p>Click "Next" to begin.</p>` :
        `<p>Välkommen, lärare! I detta interaktiva rollspel kommer du att möta scenarier som uppstår vid användning av AI-verktyg i utbildningen. Reflektera över etiska utmaningar som noggrannhet, jämlikhet, beroende, integritet och hållbarhet när du väljer dina svar.</p>
         <p>Klicka på "Nästa" för att börja.</p>`;
      messageDiv.innerHTML = introText;
      startButton.style.display = "none";
      restartButton.style.display = "none";
      nextButton.style.display = "block";
    }

    // Display a scenario (randomizing the order of choices)
    function displayScenario(scenario) {
      const data = scenario[currentLanguage];
      messageDiv.innerHTML = `<h2>${data.title}</h2>
                              <p>${data.description}</p>
                              <p><strong>${data.question}</strong></p>`;
      const shuffledChoices = shuffleArray(data.choices);
      shuffledChoices.forEach(choice => {
        const btn = document.createElement("button");
        btn.className = "choice-button";
        btn.textContent = choice.text;
        btn.onclick = () => handleChoice(choice);
        choicesDiv.appendChild(btn);
      });
      nextButton.style.display = "none";
    }

    // Display a final page (Ethical Reflection or Reality Check)
    function displayFinalPage(index) {
      const page = finalPages[index][currentLanguage];
      messageDiv.innerHTML = page.content;
      choicesDiv.innerHTML = "";
      nextButton.style.display = "block";
    }

    // Handle answer selection; provide specific feedback for incorrect answers.
    function handleChoice(choice) {
      const existingFeedback = document.getElementById("feedbackMessage");
      if (existingFeedback) { existingFeedback.remove(); }
      
      if (!choice.correct) {
        const feedbackDiv = document.createElement("div");
        feedbackDiv.id = "feedbackMessage";
        feedbackDiv.className = "outcome";
        feedbackDiv.textContent = (currentLanguage === "en") ? 
          "Incorrect: " + choice.outcome + " Please try again." : 
          "Felaktigt: " + choice.outcome + " Försök igen.";
        choicesDiv.appendChild(feedbackDiv);
        return;
      } else {
        // Correct answer: clear choices and show outcome.
        choicesDiv.innerHTML = "";
        const outcomeDiv = document.createElement("div");
        outcomeDiv.className = "outcome";
        outcomeDiv.textContent = choice.outcome;
        choicesDiv.appendChild(outcomeDiv);

        // Add a "More Info" button after a correct answer.
        const moreInfoBtn = document.createElement("button");
        moreInfoBtn.className = "more-info-btn";
        moreInfoBtn.textContent = (currentLanguage === "en") ? "More Info" : "Mer info";
        moreInfoBtn.onclick = () => openModal(getMoreInfo());
        choicesDiv.appendChild(moreInfoBtn);

        nextButton.style.display = "block";
      }
    }

    // getMoreInfo returns extended information based on the scenario index.
    function getMoreInfo() {
      let info = "";
      if (currentLanguage === "en") {
        switch (scenarioIndex) {
          case 0:
            info = `<h3>The Inaccurate Explanation – Accuracy & Accountability</h3>
                    <p>In this scenario, the AI provided an incorrect explanation, leading to student confusion and a loss of trust. This highlights the UNESCO principle of <strong>Do No Harm</strong> — technology should support learning without introducing misinformation or emotional distress. Additionally, the principle of <strong>Proportionality</strong> reminds us that AI should offer clear benefits when used, with safeguards to catch errors before they impact students. Reflect on implementing systems such as peer review or teacher oversight to verify AI outputs.</p>`;
            break;
          case 1:
            info = `<h3>The Unequal Helper – Equity & Accessibility</h3>
                    <p>This scenario shows that AI may offer clear guidance for some students while leaving others behind due to complex language or design choices. This underscores UNESCO’s <strong>Non-Discrimination</strong> principle, urging us to adapt technology for diverse learning needs. <strong>Transparency and Explainability</strong> also play a key role, ensuring that both educators and students understand the limitations of AI. Consider methods to adjust or supplement AI responses to guarantee equitable support for all learners.</p>`;
            break;
          case 2:
            info = `<h3>The Dependency Trap – Critical Thinking & Independence</h3>
                    <p>This scenario illustrates how overreliance on AI can hinder the development of critical thinking and independent problem-solving skills. UNESCO’s <strong>Human Determination</strong> principle reminds educators to remain actively involved in guiding students, ensuring that technology supports rather than replaces independent inquiry. Reflect on ways to balance AI support with activities that foster independent thought and creativity.</p>`;
            break;
          case 3:
            info = `<h3>AI in Schools – Privacy & Safety</h3>
                    <p>This scenario presents the challenge of balancing AI monitoring for student safety with the need to protect privacy. The principles of <strong>Do No Harm</strong> and <strong>Proportionality</strong> are essential: while timely intervention can be lifesaving, it must not compromise personal privacy. <strong>Transparency and Explainability</strong> require that all stakeholders understand how data is collected and used. Reflect on strategies that integrate human oversight and clear ethical policies.</p>`;
            break;
          case 4:
            info = `<h3>When Technology Misses the Mark – Misinformation and Oversight</h3>
                    <p>This scenario reveals the risk of using AI for sensitive topics without adequate review. The UNESCO principles of <strong>Do No Harm</strong> and <strong>Human Determination</strong> emphasize that educators must rigorously vet AI-generated content. <strong>Transparency and Explainability</strong> ensure that limitations are understood, prompting robust review processes to safeguard educational integrity.</p>`;
            break;
          case 5:
            info = `<h3>Empowering Environmental Problem-Solvers – Environmental Innovation & AI Impact</h3>
                    <p>This scenario demonstrates how AI can empower students to tackle environmental challenges while also prompting reflection on its ecological footprint. UNESCO’s <strong>Sustainability</strong> principle calls on educators to consider the long-term environmental and social impacts of AI. Alongside <strong>Do No Harm</strong> and <strong>Proportionality</strong>, this perspective encourages a balanced approach. Reflect on integrating project-based learning and community partnerships that explore both the benefits and costs of AI.</p>`;
            break;
          default:
            info = `<p>No additional information available.</p>`;
        }
      } else { // Swedish text
        switch (scenarioIndex) {
          case 0:
            info = `<h3>Den felaktiga förklaringen – Noggrannhet och Ansvar</h3>
                    <p>I detta scenario gav AI en felaktig förklaring, vilket ledde till förvirring bland eleverna och minskat förtroende. Detta belyser UNESCO-principen <strong>Skada inte</strong> – teknologin bör stödja lärande utan att introducera felaktig information eller känslomässig stress. Principen <strong>Proportionalitet</strong> påminner oss om att AI ska ge tydliga fördelar när den används, med skyddsåtgärder för att fånga upp fel innan de påverkar eleverna. Reflektera över att införa system som kamratgranskning eller läraröversyn för att verifiera AI-resultat.</p>`;
            break;
          case 1:
            info = `<h3>Den ojämlika hjälpen – Jämlikhet och Tillgänglighet</h3>
                    <p>Detta scenario visar att AI kan ge tydliga instruktioner för vissa elever, medan andra hamnar på efterkälken på grund av komplex språk eller designval. Detta understryker UNESCOs princip om <strong>Icke-diskriminering</strong>, som uppmanar oss att anpassa teknologin för att möta olika lärbehov. <strong>Transparens och förklarbarhet</strong> är avgörande för att både lärare och elever ska förstå AI:s begränsningar. Överväg metoder för att justera eller komplettera AI-svaren för att garantera jämlikt stöd.</p>`;
            break;
          case 2:
            info = `<h3>Beroendefällan – Kritisk Tänkande och Självständighet</h3>
                    <p>Detta scenario illustrerar hur ett överdrivet beroende av AI kan hämma utvecklingen av kritiskt tänkande och självständig problemlösning. UNESCOs princip om <strong>Mänsklig kontroll</strong> påminner lärare om att aktivt vägleda eleverna, så att teknologin stödjer snarare än ersätter självständigt lärande. Reflektera över sätt att balansera AI-stöd med aktiviteter som främjar oberoende tanke och kreativitet.</p>`;
            break;
          case 3:
            info = `<h3>AI i skolor – Integritet och Säkerhet</h3>
                    <p>Detta scenario belyser utmaningen att balansera fördelarna med AI-övervakning för elevsäkerhet med behovet av att skydda privatlivet. Principerna <strong>Skada inte</strong> och <strong>Proportionalitet</strong> är centrala: snabba AI-ingripanden kan rädda liv men får inte ske på bekostnad av integritet. <strong>Transparens och förklarbarhet</strong> kräver att alla förstår hur data samlas in och används. Reflektera över strategier med mänsklig översyn och tydliga etiska riktlinjer.</p>`;
            break;
          case 4:
            info = `<h3>När teknologin misslyckas – Felinformation och Översyn</h3>
                    <p>Detta scenario visar risken med att använda AI för känsliga ämnen utan noggrann översyn, där felaktig information kan urholka förtroendet. UNESCOs principer <strong>Skada inte</strong> och <strong>Mänsklig kontroll</strong> understryker vikten av noggrann granskning. <strong>Transparens och förklarbarhet</strong> säkerställer att AI:s begränsningar är kända, vilket understryker behovet av robusta granskningsprocesser.</p>`;
            break;
          case 5:
            info = `<h3>Att stärka miljöinnovatörer – Miljöinnovation och AI:s påverkan</h3>
                    <p>Detta scenario visar hur AI kan ge elever möjlighet att ta itu med verkliga miljöutmaningar, samtidigt som det väcker frågor om teknologiens ekologiska fotavtryck. UNESCOs princip om <strong>Hållbarhet</strong> uppmanar lärare att överväga de långsiktiga miljömässiga och sociala konsekvenserna av AI. Tillsammans med principerna <strong>Skada inte</strong> och <strong>Proportionalitet</strong> uppmuntras en balanserad användning. Reflektera över hur projektbaserat lärande och samarbete med lokala aktörer kan hjälpa eleverna att förstå både fördelarna och kostnaderna med AI.</p>`;
            break;
          default:
            info = `<p>Ingen ytterligare information finns tillgänglig.</p>`;
        }
      }
      return info;
    }

    // Modal functions
    function openModal(content) {
      const modal = document.getElementById("modal");
      const modalBody = document.getElementById("modal-body");
      modalBody.innerHTML = content;
      modal.style.display = "block";
    }
    function closeModal() {
      const modal = document.getElementById("modal");
      modal.style.display = "none";
    }

    // Next button: progress through scenarios and then final pages.
    nextButton.addEventListener("click", function() {
      clearDisplay();
      if (!inFinalPages) {
        scenarioIndex++;
        if (scenarioIndex < scenarios.length) {
          displayScenario(scenarios[scenarioIndex]);
        } else {
          inFinalPages = true;
          finalPageIndex = 0;
          displayFinalPage(finalPageIndex);
        }
      } else {
        finalPageIndex++;
        if (finalPageIndex < finalPages.length) {
          displayFinalPage(finalPageIndex);
        } else {
          nextButton.style.display = "none";
          restartButton.style.display = "block";
        }
      }
    });
  </script>
</body>
</html>
